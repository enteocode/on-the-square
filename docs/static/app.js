!function(e){function t(t){for(var r,i,c=t[0],l=t[1],u=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=l;o.push([74,1]),n()}({11:function(e,t,n){e.exports={container:"fcb6d4",map:"e9f7ea",marker:"_13f243","fx-marker-pulse":"fec78c",venue:"b417a8",type:"_748b77"}},12:function(e,t,n){e.exports={container:"ce1907",header:"fc8258",status:"abaa86",wrapper:"_4571d2",visible:"a270f4",error:"_187525"}},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(34),i=n(8),c=(n(82),n(70));n(37),n(26),n(22),n(45),n(29);var l={center:null,message:"",error:!1},u=Object(i.combineReducers)({application:function(e,t){void 0===e&&(e=l);var n=t.type,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["type"]);switch(n){case"Application/MESSAGE":return Object.assign({},e,{},r);case"Application/SET_CENTER":return Object.assign({},e,{center:r.center});default:return e}},location:function(e,t){void 0===e&&(e=null);var n=t.type,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["type"]);switch(n){case"Location/CHANGE":return Object.assign({},e,{},r);default:return e}},orientation:function(e,t){void 0===e&&(e=null);var n=t.type,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["type"]);switch(n){case"Orientation/CHANGE":return Object.assign({},e,{},r);default:return e}},venues:function(e,t){void 0===e&&(e=null);var n=t.type,r=t.data;switch(n){case"Venues/UPDATE":return[].concat(r);default:return e}}}),s=(n(59),n(92),n(35)),f=n.n(s),p=a.a.memo((function(){return a.a.createElement("footer",{className:f.a.info},a.a.createElement("svg",{viewBox:"0 0 503.84 503.84",className:f.a.icon},a.a.createElement("path",{d:"M412.624 113.576c4.273-52.847-35.104-99.152-87.951-103.424-49.76-4.023-94.3 30.763-102.449 80.016a91.881 91.881 0 0 0-.736 11.792 95.887 95.887 0 0 0 38.224 76.416l-15.712 128-12.8-19.92c.192-2.4.448-4.8.448-7.2.344-48.6-38.775-88.277-87.375-88.621-44.956-.318-82.924 33.301-88.049 77.965a86.459 86.459 0 0 0-.656 10.704c.046 44.402 33.163 81.815 77.232 87.248a83.489 83.489 0 0 0 24-.368l53.536 83.056-3.2 26.016 31.76 3.904 4.624-37.52-85.008-131.872c-6.164-9.592-3.493-22.356 6-28.672 9.748-6.184 22.647-3.489 29.104 6.08l23.488 36.448c9.575 14.854 29.38 19.134 44.234 9.559A32.001 32.001 0 0 0 275.76 310.2l21.856-178.464c1.113-8.766 9.122-14.97 17.888-13.857a16 16 0 0 1 13.984 15.745 19.94 19.94 0 0 1-.112 2L316.24 242.728l42.08 18.48 12.8-29.296-20.304-8.928 4.032-32.96a95.312 95.312 0 0 0 57.776-76.448zM175.952 245.592c-29.205.001-52.88 23.676-52.879 52.881a52.881 52.881 0 0 0 8.479 28.719l4.896 7.6c-27.901-3.576-48.819-27.295-48.88-55.424.005-2.289.143-4.575.416-6.848 3.645-30.606 31.41-52.462 62.016-48.817a55.807 55.807 0 0 1 39.296 23.665 52.783 52.783 0 0 0-13.344-1.776zM319.36 85.864v.16c-26.222-3.308-50.161 15.268-53.469 41.491l-.035.285-1.232 10a63.68 63.68 0 0 1-11.2-35.856c.005-2.674.171-5.346.496-8 4.648-35.039 36.821-59.676 71.86-55.028 31.537 4.184 55.214 30.897 55.58 62.708a69.01 69.01 0 0 1-.496 8 63.347 63.347 0 0 1-20.992 40l1.264-10.32c3.2-26.287-15.493-50.2-41.776-53.44zM459.104 270.488l-12.864 29.296 22.944 10.08-11.552 94.064-55.44 57.68-4.544 37.04 31.744 3.904 3.264-26.464 55.44-57.68 15.744-128.272zM400.508 244.784l29.306 12.854-12.848 29.29-29.305-12.854zM187.312 60.6h-25.376l36.688-36.688L176 1.288l-36.688 36.688V12.6h-32v80h80zM59.312 188.6h32v-80h-80v32h25.376L0 177.288l22.624 22.624 36.688-36.688z"})),a.a.createElement("small",{className:f.a.text},"The compass works on Earth's magnetic field, so strong electrical interferences around you may affect it's operation"))})),d=function(e){return[e.lng,e.lat]},m=n(36),v=n.n(m),h=n(11),b=n.n(h);v.a.accessToken="pk.eyJ1IjoiYWRhbS1zemVrZWx5IiwiYSI6ImNqYW1jOTNjMjRoNGcyd2p1ZXpmbXRwdDUifQ.7wMdv63YzYVjPI9HVaZC6A";var g={id:"3d-buildings",source:"composite","source-layer":"building",minzoom:15,filter:["==","extrude","true"],type:"fill-extrusion",paint:{"fill-extrusion-color":"#fff","fill-extrusion-height":9,"fill-extrusion-base":0,"fill-extrusion-opacity":.15}},y=function(e,t){return void 0===e&&(e=b.a.marker),void 0===t&&(t=""),Object.assign(document.createElement("div"),{className:e,innerHTML:t})},E=function(e,t){var n=new m.Marker(t);return n.setLngLat(e),n},V=function(e){var t=e.location,n=e.venues,o=e.orientation,i=e.onLoaded,c=Object(r.useState)([]),l=c[0],u=c[1],s=Object(r.useState)(),f=s[0],v=s[1],h=Object(r.useState)(),V=h[0],O=h[1],j=Object(r.useState)(!1),w=j[0],x=j[1],M=Object(r.useRef)();return Object(r.useEffect)((function(){f&&o&&f.setBearing(360-o.alpha).setPitch(o.beta)}),[o,f]),Object(r.useEffect)((function(){if(f&&V){var e=d(t);V.setLngLat(e),f.setCenter(e)}}),[t,f,V]),Object(r.useEffect)((function(){n&&x(!1)}),[n]),Object(r.useEffect)((function(){f&&n&&!w&&(x(!0),l.forEach((function(e){e.remove()})),u(n.map((function(e){return E(e,(t=e,n=t.name,r=t.type,y(b.a.venue,["<div>"+n+"</div>",'<div class="'+b.a.type+'">'+r+"</div>"].join("")))).addTo(f);var t,n,r}))))}),[n,f,l,w]),Object(r.useEffect)((function(){if(!f&&M&&t){var e=d(t),n=function(e,t){return new m.Map({antialias:!0,center:t,container:e,style:"mapbox://styles/mapbox/dark-v9?optimize=true",minZoom:15,maxZoom:16,zoom:15,bearing:0,pitch:60,keyboard:!1,boxZoom:!1,doubleClickZoom:!1,scrollZoom:!1,dragPan:!1,dragRotate:!1,localIdeographFontFamily:"Roboto"})}(M.current,e),r=E(e,y(b.a.marker)).addTo(n);n.on("load",(function(){n.addLayer(g,function(e){return e.getStyle().layers.find((function(e){var t=e.type,n=e.layout;return"symbol"===t&&n["text-field"]}))}(n).id),i&&i()})),n.touchZoomRotate.disableRotation(),v(n),O(r)}}),[M,f,t,i]),Object(r.useEffect)((function(){return function(){f&&f.remove()}}),[f]),a.a.createElement("section",{className:b.a.container,role:"presentation"},a.a.createElement("div",{ref:M,className:b.a.map}),a.a.createElement(p,null))},O=n(71),j=n.n(O),w=r.memo((function(){return r.createElement("svg",{className:j.a.logo,width:250,height:40,viewBox:"0 0 250 36.269",preserveAspectRatio:"xMinYMid meet"},r.createElement("path",{d:"M18.239,34.783q0,3.306-3.282,3.306H3.213Q0,38.088,0,34.783V5.24Q0,1.912,3.213,1.912H14.956q3.282,0,3.282,3.329V34.783Zm-5.409-1.341V6.558H5.409V33.442h7.42Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M40.915,38.088H36.177L27.508,15.319a13.665,13.665,0,0,1,.347,2.612V38.088h-5.27V1.912h4.739l8.669,22.307a13.663,13.663,0,0,1-.347-2.612V1.912h5.27V38.088Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M70.735,6.7H64.771V38.088H59.385V6.7H53.421V1.912H70.735V6.7Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M91.678,38.088H86.223V21.861H78.9V38.088H73.486V1.912H78.9v14.91h7.328V1.912h5.455V38.088Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M110.98,38.088h-15V1.912h14.864V6.7h-9.454V17.261h8.137v4.693h-8.137V33.3h9.593v4.785Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M141.771,34.783q0,3.306-3.282,3.306H127.6q-3.259,0-3.259-3.306V26.16h5.409v7.374h6.611v-7.1L125.52,16.174a3.833,3.833,0,0,1-1.179-2.89V5.24q0-3.329,3.259-3.329h10.888q3.282,0,3.282,3.282v8.091h-5.409V6.466H129.75v6.542l10.841,10.217a3.843,3.843,0,0,1,1.179,2.936v8.622Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M166.759,38.135h-0.37l-2.427-1.849a2.769,2.769,0,0,1-2.936,1.8H149.283q-3.214,0-3.213-3.306V5.24q0-3.329,3.282-3.329h11.674q3.282,0,3.282,3.329V31.408l2.45,1.757v4.97ZM158.9,33.442V32.171l-3.167-2.4V24.843h0.324l2.843,2.127V6.558h-7.42V33.442h7.42Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M187.471,34.783q0,3.306-3.329,3.306H172.654q-3.283,0-3.282-3.306V1.912h5.409v31.53h7.282V1.912h5.409V34.783Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M210.148,38.088h-5.363L203.7,31.223h-6.773l-1.086,6.865H190.5V38l7-36.13h5.687Zm-7.212-11.512L200.3,10.257l-2.658,16.32h5.294Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M231.692,38.088h-5.64l-5.964-16.805V18.024H225.4V6.558h-6.819v31.53h-5.409V1.912h14.355q3.259,0,3.259,3.329V18.393q0,2.288-1.549,2.959a11.136,11.136,0,0,1-3.514.347Z",transform:"translate(0 -1.865)",fill:"#fff"}),r.createElement("path",{d:"M250,38.088H235V1.912h14.864V6.7h-9.454V17.261h8.137v4.693h-8.137V33.3H250v4.785Z",transform:"translate(0 -1.865)",fill:"#fff"}))})),x=n(52),M=n.n(x),k=n(12),H=n.n(k),N=function(e){var t=e.message,n=e.error,a=e.isVisible;return r.createElement("section",{className:M()(H.a.container,a&&H.a.visible)},r.createElement("div",{className:H.a.wrapper},r.createElement("header",{className:H.a.header},r.createElement(w,null)),r.createElement("small",{className:M()(H.a.status,n&&H.a.error)},t)))},A=n(25),Z=(n(61),n(17)),S=n.n(Z),P=(n(47),function(e){return{type:"Venues/UPDATE",data:e}}),L=n(72);function F(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,a)}var q,R,T=/[hm]otel|atm|ban[k\u212A]|bar|beer|bi[s\u017F]tro|brea[k\u212A]fa[s\u017F]t|brewery|caf\xE9|club|di[s\u017F]tillery|food|ho[s\u017F]tel|hou[s\u017F]e|joint|lounge|marijuana|mar[k\u212A]et|night|place|pub|re[s\u017F]taurant|[s\u017F]hop|[s\u017F]mo[k\u212A]e|[s\u017F]tore|taxi/i,C=function(e,t){return void 0===t&&(t=""),"https://api.foursquare.com/v2/venues/"+e+Object(L.stringify)({client_id:"5S11GGEZ2A5JZPISTD4CPMQN5CL0NYKNF0AHJUK4AAOLVV1L",client_secret:"RFAWFOP4KERR3XESXVM3VI5K0UKR42TEP2XQW5IPTIZYJNK4",ll:t,openNow:1,section:"topPicks",sortByDistance:1,v:20180503},!0)},_=function(e){var t,n=e.meta,r=e.response;if(200!==n.code)throw new Error(n.errorDetail);return(t=r,t.groups.reduce((function(e,t){return e.concat(t.items)}),[])).reduce((function(e,t){var n=t.venue;return e.concat([{guid:n.id,lat:n.location.lat,lng:n.location.lng,name:n.name,type:n.categories[0].name}])}),[]).filter((function(e){return T.test(e.type)}))},I=(q=S.a.mark((function e(t){var n,r,a,o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,r=t.lng,a=[n,r].join(","),o=C("explore",a),e.next=5,fetch(o);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error(i.statusText);case 8:return e.t0=_,e.next=11,i.json();case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:case"end":return e.stop()}}),e)})),R=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=q.apply(e,t);function o(e){F(a,n,r,o,i,"next",e)}function i(e){F(a,n,r,o,i,"throw",e)}o(void 0)}))},function(e){return R.apply(this,arguments)});function z(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,a)}var G,D=function(e,t){return void 0===t&&(t=!1),{type:"Application/MESSAGE",message:e,error:t}},Y=n(73),J=window.navigator.geolocation,K=function(){var e=Object(A.b)(),t=Object(A.c)((function(e){var t=e.application,n=t.message,r=t.error,a=e.location,o=e.orientation;return{message:n,error:r,location:a,venues:e.venues,orientation:o}})),n=Object(r.useCallback)((function(){e(D(""))}),[e]),o=Object(r.useCallback)((function(t){var n=t.alpha,r=t.beta,a=t.webkitCompassHeading;null!==n&&requestAnimationFrame((function(){e(function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),{type:"Orientation/CHANGE",alpha:e.toFixed(1),beta:t.toFixed(1)}}(a||n,r))}))}),[e]),i=Object(r.useCallback)((function(t){var n=t.coords,r=n.latitude,a=n.longitude;requestAnimationFrame((function(){var t,n,o;e((t=r,n=a,void 0===o&&(o=300),function(e,r){null===r().location&&e(D("Hit the road Jack")),e(function(e,t){return{type:"Location/CHANGE",lat:e,lng:t}}(t,n));var a=r().application.center,i={lat:t,lng:n};(null===a||o<Object(Y.getDistance)(a,i,50))&&e(function(e){return t=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){z(o,r,a,i,c,"next",e)}function c(e){z(o,r,a,i,c,"throw",e)}i(void 0)}))}}(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"Application/SET_CENTER",center:e}),t.prev=1,t.t0=n,t.t1=P,t.next=6,I(e);case 6:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3),t.next=14;break;case 11:t.prev=11,t.t4=t.catch(1),n(D(t.t4.message,!0));case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),function(e){return t.apply(this,arguments)};var t}(i))}))}))}),[e]),c=Object(r.useCallback)((function(t){t.code===t.PERMISSION_DENIED&&e(D("Geolocation is denied, change your settings and reload the page",!0))}),[e]);return Object(r.useEffect)((function(){var t="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"ondeviceorientation"in window?"deviceorientation":"";return J?(e(D("Requesting location")),J.watchPosition(i,c),t&&window.addEventListener(t,o,!1)):e(D("Geolocation is not supported by your device",!0)),function(){t&&window.removeEventListener(t,o)}}),[e,o,c,i,n]),a.a.createElement(r.Fragment,{key:"map"},a.a.createElement(V,{location:t.location,venues:t.venues,orientation:t.orientation,onLoaded:n}),a.a.createElement(N,{message:t.message,error:t.error,isVisible:!(location&&""===t.message)}))},B=(n(136),function(e){var t=e.store;return r.createElement(A.a,{store:t},r.createElement(K,null))}),Q=(G=i.compose,Object(i.createStore)(u,G(Object(i.applyMiddleware)(c.a)))),U=document.getElementById("root");Object(o.render)(a.a.createElement(r.StrictMode,null,a.a.createElement(B,{store:Q})),U)},35:function(e,t,n){e.exports={info:"e9a338",text:"a4c38f",icon:"ca8343"}},36:function(e,t){e.exports=mapboxgl},71:function(e,t,n){e.exports={logo:"_8e2c59"}},74:function(e,t,n){n(75),n(78),e.exports=n(137)}});